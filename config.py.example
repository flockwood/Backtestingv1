"""
Configuration file for Backtesting System
This is your actual configuration with real credentials
"""

# ==============================================================================
# ALPACA MARKETS CONFIGURATION (Your existing credentials)
# ==============================================================================
ALPACA_API_KEY = "your_alpaca_api_key_here"
ALPACA_SECRET_KEY = "your_alpaca_secret_key_here"
ALPACA_BASE_URL = "https://paper-api.alpaca.markets/v2"  # Paper trading endpoint

# ==============================================================================
# DATA CONFIGURATION (Your existing settings)
# ==============================================================================
DATA_DIR = "data"
PLOTS_DIR = "plots"
RESULTS_DIR = "results"  # Added for storing results
REPORTS_DIR = "reports"  # Added for HTML reports

# ==============================================================================
# BACKTESTING CONFIGURATION (Your existing settings + additions)
# ==============================================================================
DEFAULT_INITIAL_CAPITAL = 10000
DEFAULT_COMMISSION = 0.001  # 0.1% per trade
DEFAULT_POSITION_SIZE = 0.95  # Use 95% of available capital

# Default backtesting parameters (for compatibility with new system)
DEFAULT_BACKTEST_CONFIG = {
    'initial_capital': DEFAULT_INITIAL_CAPITAL,
    'commission': DEFAULT_COMMISSION,
    'position_size': DEFAULT_POSITION_SIZE,
}

# ==============================================================================
# STRATEGY PARAMETERS (Your existing + expanded)
# ==============================================================================
DEFAULT_SMA_SHORT = 10
DEFAULT_SMA_LONG = 20

# Expanded strategy defaults for multiple strategies
STRATEGY_DEFAULTS = {
    'sma': {
        'short_window': DEFAULT_SMA_SHORT,
        'long_window': DEFAULT_SMA_LONG,
    },
    'rsi': {
        'period': 14,
        'oversold': 30,
        'overbought': 70,
    },
    'bollinger': {
        'period': 20,
        'std_dev': 2,
    }
}

# ==============================================================================
# COST MODEL CONFIGURATION (New - for transaction costs)
# ==============================================================================
COST_MODEL_CONFIG = {
    'fixed_fee': 0,  # No fixed fee per trade
    'percentage_fee': DEFAULT_COMMISSION,  # Use your existing commission
    'base_slippage_bps': 5,  # 5 basis points slippage
    'market_impact_coefficient': 10,  # 10 basis points market impact
    'bid_ask_spread_bps': 10,  # 10 basis points bid-ask spread
}

# ==============================================================================
# DATABASE CONFIGURATION (Optional - you can ignore if not using)
# ==============================================================================
DB_CONFIG = {
    'host': 'localhost',
    'port': 5432,
    'database': 'backtesting_db',
    'user': 'postgres',
    'password': '',  # Set if you want to use database
}

# ==============================================================================
# DEFAULT DATE RANGE (New - useful defaults)
# ==============================================================================
from datetime import datetime, timedelta

DEFAULT_END_DATE = datetime.now().strftime('%Y-%m-%d')
DEFAULT_START_DATE = (datetime.now() - timedelta(days=90)).strftime('%Y-%m-%d')

# ==============================================================================
# LOGGING CONFIGURATION (New - for better debugging)
# ==============================================================================
import logging

LOGGING_CONFIG = {
    'level': logging.INFO,
    'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    'file': 'backtesting.log',
    'console': True,
}

# ==============================================================================
# FEATURE FLAGS (New - control features)
# ==============================================================================
FEATURES = {
    'enable_ml_strategies': False,  # Machine learning strategies
    'enable_live_trading': False,  # Live paper trading
    'enable_optimization': True,  # Parameter optimization
    'enable_risk_parity': False,  # Risk parity position sizing
    'save_to_database': False,  # Database persistence (set to True if you set up PostgreSQL)
}

# ==============================================================================
# DATA SOURCE PREFERENCES (New)
# ==============================================================================
PREFERRED_DATA_SOURCE = 'alpaca'  # Since you have Alpaca configured
ENABLE_DATA_CACHE = True  # Cache downloaded data
CACHE_EXPIRY_HOURS = 24

# ==============================================================================
# PERFORMANCE THRESHOLDS (New - for analysis)
# ==============================================================================
PERFORMANCE_THRESHOLDS = {
    'good_sharpe': 1.0,  # Highlight if Sharpe > 1.0
    'warning_drawdown': -0.20,  # Warning if drawdown > 20%
    'min_trades': 10,  # Minimum trades for valid backtest
}

# ==============================================================================
# VALIDATION RULES (New - for input validation)
# ==============================================================================
VALIDATION_RULES = {
    'min_initial_capital': 100,
    'max_position_size': 1.0,
    'min_data_points': 20,  # Minimum data points for backtest
    'max_lookback_years': 10,  # Maximum historical data to load
}

# ==============================================================================
# API RATE LIMITS (New - important for Alpaca)
# ==============================================================================
RATE_LIMITS = {
    'alpaca_data': 200,  # Alpaca data API rate limit per minute
    'alpaca_trading': 200,  # Alpaca trading API rate limit
}

# ==============================================================================
# REPORT CONFIGURATION (New - for generating reports)
# ==============================================================================
REPORT_CONFIG = {
    'generate_html': True,
    'generate_excel': False,  # Set to True if you have openpyxl installed
    'include_charts': True,  # Set to False if matplotlib not installed
    'chart_style': 'seaborn',
}